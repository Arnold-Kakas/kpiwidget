% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/kpiwidget.R
\name{kpiwidget}
\alias{kpiwidget}
\title{Create an interactive KPI widget for Quarto dashboards with Crosstalk support.}
\usage{
kpiwidget(
  data,
  kpi = c("count", "distinctCount", "duplicates", "sum", "mean", "min", "max"),
  comparison = NULL,
  column = NULL,
  selection = NULL,
  group1 = NULL,
  group2 = NULL,
  digits = 1,
  big_mark = " ",
  prefix = NULL,
  suffix = NULL,
  width = NULL,
  height = NULL,
  elementId = NULL,
  group = NULL
)
}
\arguments{
\item{data}{A \code{crosstalk::SharedData} object.}

\item{kpi}{A character string specifying the metric to compute.
Options are: \code{"sum"}, \code{"mean"}, \code{"min"}, \code{"max"},
\code{"count"}, \code{"distinctCount"}, \code{"duplicates"}. The default is the first element.}

\item{comparison}{Optional. A character string indicating a comparison mode.
Options are \code{"ratio"} or \code{"share"}. If not provided (NULL), no comparison is performed.}

\item{column}{A column name (as a string) to be used for numeric aggregation.
In standard mode this is required. In comparison mode, if provided it is used for both groups;
if omitted, counts are used.}

\item{selection}{A one-sided formula to filter rows.}

\item{group1}{For comparison mode: a one-sided formula defining group 1.
This is required in comparison mode.}

\item{group2}{For comparison mode: a one-sided formula defining group 2.
For \code{comparison = "ratio"}, if not provided, it defaults to the complement of group1.
For \code{comparison = "share"}, if not provided, it defaults to all rows.}

\item{digits}{Number of digits to round the computed result. Default: 1.}

\item{big_mark}{Character to be used as the thousands separator. Default: " ".}

\item{prefix}{A string to be prepended to the displayed value.}

\item{suffix}{A string to be appended to the displayed value.}

\item{width}{Widget width (passed to \code{htmlwidgets::createWidget}).}

\item{height}{Widget height.}

\item{elementId}{Optional element ID for the widget.}

\item{group}{Crosstalk group name. Typically provided by the SharedData object.}
}
\value{
An object of class \code{htmlwidget} that will intelligently print itself into an HTML page.
}
\description{
This function computes and displays a key performance indicator (KPI) based on a
variety of statistics. The data can be filtered using logical vectors or formulas.
In addition, a comparison mode can be applied by specifying the \code{comparison}
parameter as either \code{"ratio"} or \code{"share"}. For example, if
\code{comparison = "ratio"} and \code{kpi = "sum"} (with a column indicating sales),
the widget will calculate the ratio of sales between two groups defined by \code{group1}
and \code{group2}.
}
\examples{
\dontrun{
  # Standard KPI example:
  kpiwidget(mtcars_shared, kpi = "mean", column = "mpg", digits = 1,
            prefix = "", suffix = " mpg")

  # Comparison (ratio) example: ratio of sales between two regions.
  kpiWidget(sales_shared, kpi = "sum", comparison = "ratio", column = "sales",
            group1 = ~ region == "North",
            # group2 is optional; defaults to complement of group1:
            prefix = "$")

  # Comparison (share) example: share of new customer sales relative to all sales.
  kpiWidget(customer_shared, kpi = "sum", comparison = "share", column = "sales",
            selection = ~ country == "USA",
            group1 = ~ new_customer == TRUE,
            # group2 is optional; defaults to all rows:
            prefix = "", suffix = " \%")
}

}
