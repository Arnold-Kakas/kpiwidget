---
title: "Getting started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{getting_started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(flexdashboard)
library(kpiwidget)
```

```{r}
library(crosstalk)
library(dplyr)
library(htmltools)

# Example data
df <- mtcars %>% 
  mutate(model = rownames(.))

# Wrap in SharedData with row numbers as keys
sd <- SharedData$new(df, key = ~1:nrow(df), group = "mtcars_group")
```


```{r}
filter_checkbox("gear", "Gear", sd, ~gear, inline = TRUE)
```


Column parameter must be provided. Default kpi is `count` (lenght of dataset).
```{r}
kpiwidget(
  data = sd,
  column = "mpg",
  height = "25px")
```


## KPI options

### sum
```{r}
kpiwidget(
  data = sd,
  column = "mpg",
  kpi = "sum",
  height = "25px")
```

### mean
```{r}
kpiwidget(
  data = sd,
  column = "mpg",
  kpi = "mean",
  height = "25px")
```

### min
```{r}
kpiwidget(
  data = sd,
  column = "mpg",
  kpi = "min",
  height = "25px")
```

### max
```{r}
kpiwidget(
  data = sd,
  column = "mpg",
  kpi = "max",
  height = "25px")
```

### count
```{r}
kpiwidget(
  data = sd,
  column = "mpg",
  kpi = "count",
  height = "25px")
```

### distinctCount
```{r}
kpiwidget(
  data = sd,
  column = "cyl",
  kpi = "distinctCount",
  height = "25px")
```

### ratio
```{r}
kpiwidget(
  data = sd,
  column = "mpg",
  kpi = "sum",
  comparison = "ratio",
  group1 = ~cyl == 4,
  height = "25px")
```

### share
```{r}
kpiwidget(
  data = sd,
  column = "mpg",
  kpi = "sum",
  comparison = "share",
  group1 = ~cyl == 4,
  group2 = ~cyl == 6,
  height = "25px")
```

